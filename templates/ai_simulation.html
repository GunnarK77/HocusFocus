{% extends "base.html" %}
{% block title %}AI Simulation{% endblock %}
{% block content %}
<h1>AI Simulation</h1>
<p>Run a simulation of smartphone usage patterns using AI agents.</p>

<form id="simulation-form">
    <label for="days">Number of days to simulate:</label>
    <input type="number" id="days" name="days" min="1" max="30" value="7">
    <button type="submit">Run Simulation</button>
</form>

<div id="results-container" style="display: none;">
    <h2>Simulation Results</h2>
    <table id="results-table">
        <thead>
            <tr>
                <th>Agent Name</th>
                <th>Day</th>
                <th>Total Time</th>
                <th>Goal Time</th>
                <th>Social Media Time</th>
                <th>Read Time</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
document.getElementById('simulation-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const days = document.getElementById('days').value;
    fetch('/run_ai_simulation', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: `days=${days}`
    })
    .then(response => response.json())
    .then(data => {
        const tableBody = document.querySelector('#results-table tbody');
        tableBody.innerHTML = '';
        data.forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${row.agent_name}</td>
                <td>${row.day}</td>
                <td>${row.total_time}</td>
                <td>${row.goal_time}</td>
                <td>${row.social_media_time}</td>
                <td>${row.read_time}</td>
            `;
            tableBody.appendChild(tr);
        });
        document.getElementById('results-container').style.display = 'block';
    });
});
</script>
{% endblock %}